import{createFilter as $}from"@rollup/pluginutils";import S from"path";var v=(e={})=>{var c,f,p;e.transform||(e.transform=n=>n);const o={},x=(c=e.alwaysOutput)!=null?c:!1,y=$((f=e.include)!=null?f:["**/*.css"],(p=e.exclude)!=null?p:[]),d=(n,t,s=new Set)=>{if(s.has(n))return[];s.add(n);const r=[n];return t(n).importedIds.forEach(a=>{r.push(...d(a,t,s))}),r};return{name:"import-css",transform(n,t){var s;if(!y(t))return;const r=e.minify?b(e.transform(n)):e.transform(n);(!o[t]||o[t]!=r)&&(o[t]=r);const a=this.getModuleInfo(t);return e.modules||((s=a.assertions)==null?void 0:s.type)=="css"?{code:`const sheet = new CSSStyleSheet();sheet.replaceSync(${JSON.stringify(r)});export default sheet;`,map:{mappings:""}}:{code:`export default ${JSON.stringify(r)};`,map:{mappings:""}}},generateBundle(n,t){var s,r;let a={},i=null;for(let l in t)a=Object.assign(a,t[l].modules),i||(i=t[l].facadeModuleId);const m=d(i,this.getModuleInfo),g=Object.entries(o).sort((l,u)=>m.indexOf(l[0])-m.indexOf(u[0])).map(([l,u])=>{if(!a[l])return u}).join(`
`);if(g.trim().length<=0&&!x)return;const h=(r=e.output)!=null?r:(s=n.file)!=null?s:"bundle.js",O=S.basename(h,S.extname(h));this.emitFile({type:"asset",fileName:`${O}.css`,source:g})}}};function b(e){return e=e.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,""),e=e.replace(/ {2,}/g," "),e=e.replace(/ ([{:}]) /g,"$1"),e=e.replace(/([{:}]) /g,"$1"),e=e.replace(/([;,]) /g,"$1"),e=e.replace(/ !/g,"!"),e}export{v as default};
